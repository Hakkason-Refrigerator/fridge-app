# 冷蔵庫管理アプリ「Fridge App」企画書

## プロジェクト概要
食材の期限管理と消費促進を目的とした冷蔵庫管理アプリケーション

## 実装済み機能一覧

### 1. 基本的な食材管理機能
- ✅ **食材登録**: 名前、期限日、登録日、備考の入力
- ✅ **食材一覧表示**: 期限順での表示
- ✅ **食材詳細表示**: 個別の食材情報詳細画面
- ✅ **食材編集**: 名前、期限日、登録日の編集機能
- ✅ **食材削除**: 「食べた！」ボタンによる消費記録

### 2. 期限管理・視覚的警告システム
- ✅ **期限ステータス判定**: 5段階の期限状態（fresh/good/warning/critical/expired）
- ✅ **色分け表示**: 期限状況に応じたカードヘッダーの背景色変化
  - 🟦 新鮮（7日以上）: 青色
  - 🟢 良好（4-7日）: 緑色  
  - 🟡 注意（2-3日）: 黄色
  - 🟠 危険（明日期限）: オレンジ色
  - 🔴 期限切れ: 赤色
- ✅ **期限メッセージ**: 残り日数の表示と警告文

### 3. レシピ連携機能
- ✅ **外部レシピサイト連携**: 食材名から自動でレシピ検索
  - Cookpad検索リンク
  - Kurashiru検索リンク  
  - 楽天レシピ検索リンク
- ✅ **ワンタップアクセス**: 詳細画面から直接レシピサイトへ
- ✅ **動的サイト管理**: 設定ベースでレシピサイト追加・削除可能

### 4. マスコット機能「フリッジくん」
- ✅ **キャラクター実装**: 画面左下に常駐するマスコット
- ✅ **インタラクティブメッセージシステム**: タップによるメッセージ切り替え
- ✅ **智的警告システム**: 期限間近食材の自動検知・警告
- ✅ **励ましメッセージ**: 食材管理を促進する励ましの言葉
- ✅ **アニメーション**: スムーズなメッセージ切り替えエフェクト
- ✅ **メッセージローテーション**: 奇数回（警告）・偶数回（励まし）の切り替えロジック

### 5. データベース・状態管理・認証
- ✅ **Supabase統合**: PostgreSQLデータベースでの永続化
- ✅ **匿名認証**: 自動ログイン機能でユーザー管理
- ✅ **Zustand状態管理**: グローバル状態でのデータ管理
- ✅ **CRUD操作**: 完全な作成・読取・更新・削除機能
- ✅ **データ変換**: キャメルケース↔スネークケースの自動変換

### 6. ユーザーインターフェース
- ✅ **カード形式表示**: 見やすい食材カードレイアウト
- ✅ **レスポンシブデザイン**: React Native による最適化
- ✅ **直感的操作**: タップによる詳細表示・編集
- ✅ **統一されたデザイン**: 期限状況に応じた一貫した色彩設計

## 企画変更点・完了済み機能

### 1. コメント機能の仕様変更（✅ 完了）
**実装済み仕様:**
- ✅ **備考機能**: コメント欄を「食材の備考」として活用（保存先、調理方法など）
- ✅ **マスコット機能**: 感情的なコメントは画面左下のマスコットが発言

### 2. マスコット機能「フリッジくん」（✅ 完了）
**実装済み詳細:**
- ✅ **配置**: 画面左下に常駐するマスコットキャラクター
- ✅ **発言内容**:
  - 期限切れ間近の食材の具体的リストアップ
  - 期限管理のアドバイス・警告メッセージ
  - 食材消費の促進メッセージ
  - ユーザーを励ます応援メッセージ
- ✅ **インタラクション**:
  - タップによるメッセージ切り替え
  - 奇数回タップ時：警告メッセージ（期限間近食材がある場合）
  - 偶数回タップ時：励ましメッセージ
  - 食材データ変更時の自動メッセージ更新
- ✅ **視覚効果**: スムーズなアニメーション付きメッセージ表示

### 3. 備考機能の強化（✅ 完了）
**実装済み利用例:**
- 「冷凍庫2段目」（保存場所）
- 「サラダ用」（用途）
- 「開封済み」（状態）
- 「特売品」（購入情報）

### 4. コード品質改善（✅ 完了）
- ✅ **重複コード削除**: 期限計算・レシピURL生成の統合
- ✅ **動的コンポーネント**: map関数による効率的なUI生成
- ✅ **設定ベース管理**: レシピサイト情報の構造化
- ✅ **保守性向上**: 明確なロジック分離とコメント追加

## 今後の実装計画

## 技術スタック

### フロントエンド
- **React Native**: モバイルアプリフレームワーク
- **Expo SDK 53.0.20**: 開発・デプロイ環境
- **TypeScript**: 型安全な開発
- **expo-router**: ファイルベースルーティング

### バックエンド・データベース
- **Supabase**: PostgreSQL + 認証 + API
- **Zustand**: クライアント状態管理

### 開発・デプロイ
- **Git**: バージョン管理
- **GitHub**: リポジトリ管理・協業
- **VS Code**: 統合開発環境

## ファイル構成
```
app/
├── _layout.tsx        # アプリ全体のレイアウト
├── index.tsx          # メイン画面（食材一覧）+ マスコット表示
├── [id].tsx          # 食材詳細・編集画面
└── register.tsx       # 新規食材登録画面

components/
├── FoodCard.tsx       # 食材カードコンポーネント
├── Header.tsx         # ヘッダーコンポーネント
├── Mascot.tsx         # フリッジくんマスコットコンポーネント ✨
└── ChatBubble.tsx     # チャット吹き出しコンポーネント

store/
└── foodStore.ts       # Zustand状態管理

types/
└── food.ts           # 食材データ型定義

utils/
├── expiryUtils.ts    # 期限判定ロジック
├── dateUtils.ts      # 日付処理ユーティリティ
└── messageGenerator.ts # メッセージ生成ロジック

lib/
├── supabase.ts       # Supabaseクライアント設定
└── auth.ts           # 認証処理（匿名ログイン） ✨

assets/
└── icons/
    └── fridgekun.png  # フリッジくんマスコット画像 ✨
```

## データベーススキーマ
```sql
foods テーブル:
- id (UUID, Primary Key)
- name (TEXT) - 食材名
- comment (TEXT) - 備考（新仕様では保存場所・用途など）
- expiry_date (DATE) - 期限日
- registered_date (TIMESTAMP) - 登録日時
- is_consumed (BOOLEAN) - 消費済みフラグ
```

## 今後の実装計画

### Phase 0: 短期改善予定（直近実装）
1. 🤖 **フリッジくん機能拡張**: 期限切れ食材に対する専用コメント追加
   - 期限切れ食材の具体的な警告メッセージ
   - 期限切れ日数に応じた緊急度の調整
   - 廃棄推奨・早急消費アドバイス
2. 🏷️ **ヘッダー改善**: アプリタイトル・サブタイトルの変更
   - より親しみやすいタイトル設定
   - アプリの特徴を表現するサブタイトル
   - ユーザビリティ向上のための文言調整

### Phase 1: 追加機能開発
1. ✏️ **通知機能**: 期限切れアラート・プッシュ通知
2. 📊 **統計・分析機能**: 食材消費傾向の可視化
3. 🛒 **買い物リスト機能**: 消費済み食材からの自動生成
4. 🏷️ **食材カテゴリ分類**: 野菜・肉類・調味料等の分類管理

### Phase 2: UX向上
1. 🔍 **検索・フィルタ機能**: 備考内容での絞り込み
2. 📝 **備考テンプレート機能**: よく使う備考の候補表示
3. 📱 **マルチデバイス対応**: タブレット・デスクトップ対応
4. 🌙 **ダークモード**: テーマ切り替え機能

### Phase 3: 高度な機能
1. 🤖 **AI機能**: 食材認識・レシピ提案
2. 👥 **共有機能**: 家族間での食材管理共有
3. 📈 **食費管理**: 購入金額・節約効果の追跡
4. 🔔 **カスタム通知**: ユーザー設定による通知タイミング

## プロジェクト成果

### 🎯 主要成果
- ✅ **完全なCRUD操作**: データベース連携による永続化
- ✅ **直感的なUI**: 期限状況の視覚的表現
- ✅ **実用的な機能**: レシピ連携による食材活用促進
- ✅ **マスコット機能**: フリッジくんによる楽しいユーザー体験
- ✅ **認証システム**: 匿名ログインによるユーザー管理

### 📊 技術的達成
- **コード品質**: 重複削除・構造化による保守性向上
- **パフォーマンス**: 効率的な状態管理とデータフロー
- **拡張性**: 設定ベースでの機能追加・変更対応
- **ユーザビリティ**: アニメーション・インタラクションの最適化

### 🚀 イノベーション
- **感情的なつながり**: マスコットによる親しみやすさ
- **智的警告システム**: 食材状況に応じた的確なメッセージ
- **シームレスな体験**: 登録から消費まで一貫したUX

## 協業体制
- **フロントエンド・マスコット開発**: メイン担当者
- **バックエンド・認証**: 協力者によるSupabase統合完了
- **Git管理**: ブランチベース開発（branch-message → main）
- **コード品質**: 相互レビューによる継続的改善

---

*企画書更新日: 2025年8月3日*
*現在のブランチ: main*
*マスコット機能実装完了: ✅*
*プルリクエスト準備完了: ✅*
